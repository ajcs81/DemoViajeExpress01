
@{
    ViewData["Title"] = "Cooperativa";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
}

<div class="col-sm-12">
    <!-- Customer overview start -->
    <div class="card ">
        <div class="card-header">
            <button class="btn btn-round waves-light btn-primary" onclick="getCooperativa()">
                <i class="fa fa-plus-square"></i>
                Nueva Cooperativa
            </button>

        </div>
        <div class="card-block">
            <div class="table-responsive dt-responsive">
                <table class="table table-striped table-bordered nowrap" id="tblCoop">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Teléfono</th>
                            <th>Dirección</th>
                            <th>Estado</th>
                            <th>Acción</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>
    <div class="modal fade" id="formModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content" id="modalbody">

            </div>
        </div>
    </div>
</div>
@section Scripts{

    <script type="text/javascript">
        $(document).ready(function () {
            var id_usuario_rol = localStorage.getItem('id_usuario_rol')
            let listarmodulo = document.getElementById('modulos');
            var url = `http://localhost:59454/Modulo/ ${id_usuario_rol}`;
            let consult = {
                "offset": 0,
                "limit": 10
            }
            fetch(url)
                .then((response) => {
                    return response.json();
                })
                .then((data) => {
                    if (data['exito']) {
                        var modul = data['data'];
                        modul.forEach((item) => {
                            listarmodulo.innerHTML += `
                                            <li class="">
                                            <a onclick="navegar('Cooperativa/Index')" class="waves-effect waves-dark">
                                                <span class="pcoded-micon">
                                                      <i class="feather icon-command"></i>
                                                 </span>
                                                  <span class="pcoded-mtext">${item['descripcion_modulo']} </span>
                                            </a>
                                            </li>`
                        });
                        //modul.forEach((item) => console.log(item['ruta']));
                    } else {
                        alert(data['mensaje']);
                    }
                    //console.log(data);

                }).catch((error) => alert(error));


            
           
        });

        function navegar(ruta) {
            location.href = `../${ruta}`;
        }
    </script>


    @*<script>

        var datatable;
        var map;
        const action_url = 'http://localhost:59454/Cooperativa/Obtener';

        $(document).ready(function () {
            let consult = {
                "offset": 0,
                "limit": 10
            }




            $.ajax({
                url: action_url,
                method: "POST",
                data: $(consult).serialize(),
                dataType: "json",
                success: function (data) {
                    console.log(data);
                }
            });



            //datatable = $('#tblCoop').DataTable({
            //    processing: false,
            //    serverSide: false,
            //    responsive: true,
            //    autoWidth: false,
            //    ajax: {
            //        url: "http://localhost:59454/Cooperativa/Obtener",
            //        type: "POST",
            //        data: $(consult).serialize(),
            //        datatype: "json"
            //        success:
            //    },

            //    columns: [
            //        { data: "nombre" },
            //        { data: "direccion" },
            //        { data: "telefono" },
            //        { data: "activo" },
            //        {
            //            data: "id_cooperativa", "render": function (data) {
            //                var id = data;
            //                return '<button type="button" onclick="getCooperativa(' + id + ')"  class="edit btn btn-primary btn-sm"> <i class="fa fa-edit fa-lg"></i></button> <button type="button"  onclick="Eliminar(' + id + ')"  class="edit btn btn-danger btn-sm"><i class="fa fa-trash fa-lg"></i> </button>';
            //            }
            //        }
            //    ]
            //});




        });

    </script>*@
}
